// Code generated by kk; DO NOT EDIT.

package config

import (
	"{{.ModulePath}}/internal/api"
{{- if .SecretManagers}}
	{{- range .SecretManagers}}
	"{{$.ModulePath}}/{{.RelPath}}"
	{{- end }}
{{- end}}
{{- if .ProviderStructs}}
	{{- range .ProviderStructs}}
	"{{$.ModulePath}}/{{.RelPath}}"
	{{- end }}
{{- end}}
)

func configureProvider(logger func(string, ...any), a *api.Provider) error {
{{- if or .SecretManagers .ProviderStructs }}
	var err error
{{- end}}
{{- if .SecretManagers}}
	{{- range .SecretManagers}}
	a.Sm, err = {{.Name}}.New(logger)
	if err != nil {
		return err
	}
	{{- end }}
{{- end}}
{{- if .ProviderStructs}}
	{{- range .ProviderStructs}}
	a.{{.StructName}}Provider, err = {{.Name}}.New(logger, a.Sm)
	if err != nil {
		return err
	}
	{{- end }}
{{- end}}
	return nil
}
